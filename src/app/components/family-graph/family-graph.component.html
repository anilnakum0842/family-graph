<div class="graph-container position-relative border rounded bg-light" #container>
    <svg #svg class="w-100 h-100"></svg>

    <!-- Detailed Legend Overlay -->
    <div class="legend-panel position-absolute top-0 end-0 p-3 m-3 bg-white border rounded shadow-sm">
        <h6 class="fw-bold mb-2 small text-uppercase text-muted">Legend</h6>

        <!-- Node Types -->
        <div class="d-flex align-items-center mb-2">
            <div class="legend-box me-2" style="background: #e3f2fd; border: 1px solid #007bff;"></div>
            <span class="small">Root Family</span>
        </div>
        <div class="d-flex align-items-center mb-2">
            <div class="legend-box me-2" style="background: #e8f5e9; border: 1px solid #2e7d32;"></div>
            <span class="small">Male</span>
        </div>
        <div class="d-flex align-items-center mb-2">
            <div class="legend-box me-2" style="background: #fff3e0; border: 1px solid #ef6c00;"></div>
            <span class="small">Female</span>
        </div>

        <hr class="my-2">

        <!-- Node Status -->
        <div class="d-flex align-items-center mb-2">
            <div class="legend-box me-2" style="background: #fff; border: 1px solid #333;"></div>
            <span class="small">Alive</span>
        </div>
        <div class="d-flex align-items-center mb-2">
            <div class="legend-box me-2" style="background: #fff; border: 1px dashed #757575;"></div>
            <span class="small">Deceased (Dashed)</span>
        </div>

        <hr class="my-2">

        <!-- Links -->
        <div class="d-flex align-items-center mb-2">
            <div class="legend-line me-2" style="border-top: 2px solid #ccc;"></div>
            <span class="small">Parent-Child</span>
        </div>
        <div class="d-flex align-items-center mb-2">
            <div class="legend-line me-2" style="border-top: 2px dashed #ccc;"></div>
            <span class="small">Spouse</span>
        </div>
        <div class="d-flex align-items-center mb-2">
            <div class="legend-line me-2" style="border-top: 3px solid #d32f2f;"></div>
            <span class="small">Highlighted Path</span>
        </div>

        <div class="mt-3 text-muted fst-italic tiny-text">
            * Click node to Expand/Collapse
        </div>
    </div>
</div>